{% extends "layout.html" %}
{% block content %}

<h2 class="mb-4">⚙️ AI Control Panel</h2>
<p>Enable or disable AI automation features in real time.</p>

<div class="list-group">

  {% for key, value in settings.items() %}
  <div class="list-group-item d-flex justify-content-between align-items-center">
    <strong>{{ key.replace("_", " ").title() }}</strong>

    <div class="form-check form-switch">
      <input class="form-check-input"
             type="checkbox"
             id="{{ key }}"
             {% if value %} checked {% endif %}
             onchange="toggleSetting('{{ key }}')">
    </div>
  </div>
  {% endfor %}

</div>

<script>
function toggleSetting(key) {
    let value = document.getElementById(key).checked;

    fetch("/api/ai/settings/update", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ key: key, value: value })
    })
    .then(r => r.json())
    .then(data => {
        console.log("Updated:", data);
    });
}
</script>

{% endblock %}
